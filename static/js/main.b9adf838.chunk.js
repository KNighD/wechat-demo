(this["webpackJsonpwechat-demo"]=this["webpackJsonpwechat-demo"]||[]).push([[0],{34:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n,c,r=a(1),i=a(0),s=a.n(i),o=a(23),d=a.n(o),j=(a(34),a(6)),u=a.n(j),h=a(13),b=a(9),l=a(5),O=a(2),m=a(24),v=a.n(m);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.IMAGE=2]="IMAGE",e[e.WITHDRAW=3]="WITHDRAW",e[e.TIME=4]="TIME"}(n||(n={})),function(e){e[e.ME=1]="ME",e[e.OTHER=2]="OTHER",e[e.SYSTEM=3]="SYSTEM"}(c||(c={}));var x=a(11),f=a(10),p=a.n(f),g=a(25);function N(e){var t=e.src,a=e.renderPlaceHolder,n=e.alt,c=void 0===n?"":n,s=e.imgClassName,o=void 0===s?"":s,d=e.imgStyle,j=Object(i.useState)(!1),u=Object(l.a)(j,2),h=u[0],b=u[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:t,alt:c,onLoad:function(){return b(!0)},style:Object(g.a)({display:h?"block":"none"},d),className:o}),!h&&a()]})}var T,E,M,w=function(e){var t=e.data,a=Math.min(t.height,100),n=t.width/t.height*a,c=function(){return Object(r.jsx)(x.a,{speed:2,width:n,height:a,viewBox:"0 0 36 36",children:Object(r.jsx)("rect",{x:"0",y:"0",width:n,height:a})})};return Object(r.jsx)(p.a,{height:a,scrollContainer:".message-list-container",children:Object(r.jsx)(N,{imgStyle:{height:a,width:n},src:t.content,alt:"",renderPlaceHolder:function(){return Object(r.jsx)(c,{})}})})},R=function(e){var t=e.data;return Object(r.jsx)("div",{children:t.content})},y=function(e){var t=e.data;return Object(r.jsx)("div",{children:t.content})},S=(T={},Object(O.a)(T,n.IMAGE,w),Object(O.a)(T,n.TEXT,R),Object(O.a)(T,n.UNKNOWN,y),T),I=function(e){var t=e.data,a=S[t.type];return Object(r.jsx)("div",{children:Object(r.jsx)(a,{data:t})})},W=function(){return Object(r.jsx)(x.a,{speed:2,width:36,height:36,viewBox:"0 0 36 36",children:Object(r.jsx)("circle",{cx:"18",cy:"18",r:"18"})})},k=function(e){var t=e.avatar;return Object(r.jsx)(p.a,{height:36,scrollContainer:".message-list-container",children:Object(r.jsx)("div",{className:"avatar-wrap",children:Object(r.jsx)(N,{imgClassName:"avatar",src:t,renderPlaceHolder:function(){return Object(r.jsx)(W,{})}})})})},H=function(e){var t=e.data;return Object(r.jsxs)("div",{className:"my-message-container",children:[Object(r.jsx)(k,{avatar:t.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(I,{data:t})})]})},A=function(e){var t=e.data;return Object(r.jsxs)("div",{className:"other-message-container",children:[Object(r.jsx)(k,{avatar:t.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(I,{data:t})})]})},C=function(e){var t=e.data;return Object(r.jsx)("div",{className:"withraw-content",children:t.content})},P=function(e){var t=e.data;return Object(r.jsx)("div",{className:"time-content",children:t.content})},L=(E={},Object(O.a)(E,n.WITHDRAW,C),Object(O.a)(E,n.TIME,P),E),D=function(e){var t=e.data,a=L[t.type];return Object(r.jsx)("div",{className:"system-message-container",children:Object(r.jsx)(a,{data:t})})},G=(M={},Object(O.a)(M,c.ME,H),Object(O.a)(M,c.OTHER,A),Object(O.a)(M,c.SYSTEM,D),M),K=function(e){var t=e.messageList,a=e.loadMore,n=e.total;return Object(r.jsx)("div",{className:"message-list-container",children:Object(r.jsx)(v.a,{pageStart:0,hasMore:t.length<n||0===t.length,useWindow:!1,loadMore:a,loader:Object(r.jsx)("div",{className:"loader",children:"Loading..."},0),threshold:20,isReverse:!0,children:t.map((function(e){var t=G[e.from];return Object(r.jsx)(t,{data:e},e.id)}))})})},U=function(){return Object(r.jsx)("div",{className:"input-box-container"})},X=a(26),Y=a.n(X),B=a(3),F=a.n(B),J=a(27),q=a(28),z=function(){function e(){var t=this;Object(J.a)(this,e),this.id=B.Random.guid(),this.createTime=B.Random.datetime(),this.type=0,this.content="",this.from=void 0,this.userName=void 0,this.avatar=void 0,this.height=void 0,this.width=void 0,this.userMessageProducer=function(){var e;t.type=B.Random.pick([n.TEXT,n.IMAGE,n.UNKNOWN]),(e={},Object(O.a)(e,n.TEXT,(function(){t.content=B.Random.cparagraph(1,3)})),Object(O.a)(e,n.IMAGE,(function(){t.content=B.Random.image(B.Random.pick(["300x250","250x250","240x400"]));var e=t.content.split(/\/+/)[2].split("x"),a=Object(l.a)(e,2),n=a[0],c=a[1];t.width=Number(n),t.height=Number(c)})),Object(O.a)(e,n.UNKNOWN,(function(){t.content="\u3010\u672a\u77e5\u6d88\u606f\u7c7b\u578b\u3011"})),e)[t.type]()},this.from=B.Random.pick([c.ME,c.OTHER,c.SYSTEM]),this.producer[this.from]()}return Object(q.a)(e,[{key:"producer",get:function(){var e,t=this;return e={},Object(O.a)(e,c.ME,(function(){t.userName="\u6211",t.avatar=B.Random.image("40x40",void 0,"\u6211"),t.userMessageProducer()})),Object(O.a)(e,c.OTHER,(function(){t.userName=B.Random.pick(["\u7532","\u4e59","\u4e19"]),t.avatar=B.Random.image("40x40",void 0,t.userName),t.userMessageProducer()})),Object(O.a)(e,c.SYSTEM,(function(){var e;t.type=B.Random.pick([n.TIME,n.WITHDRAW]);var a=(e={},Object(O.a)(e,n.TIME,B.Random.datetime()),Object(O.a)(e,n.WITHDRAW,"".concat(B.Random.pick(["\u7532","\u4e59","\u4e19"]),"\u64a4\u56de\u4e00\u6761\u6d88\u606f")),e);t.content=a[t.type]})),e}}]),e}();F.a.setup({timeout:"1000"}),F.a.mock("/messages",(function(){return{list:new Array(20).fill("").map((function(){return new z})),total:100}}));var Q=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("/messages");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(60);var V=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(i.useState)(0),s=Object(l.a)(c,2),o=s[0],d=s[1],j=Object(i.useState)(!1),O=Object(l.a)(j,2),m=O[0],v=O[1],x=Object(i.useCallback)(Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,Q();case 5:t=e.sent,n([].concat(Object(h.a)(t.list),Object(h.a)(a))),d(t.total),v(!1);case 9:case"end":return e.stop()}}),e)}))),[m,a]);return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)("header",{className:"app-header",children:"MessageList"}),Object(r.jsx)(K,{messageList:a,total:o,loadMore:x}),Object(r.jsx)(U,{})]})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};d.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root")),Z()}},[[61,1,2]]]);
//# sourceMappingURL=main.b9adf838.chunk.js.map