(this["webpackJsonpwechat-demo"]=this["webpackJsonpwechat-demo"]||[]).push([[0],{36:function(t,e,a){},63:function(t,e,a){},64:function(t,e,a){"use strict";a.r(e);var n,c,r=a(1),i=a(0),s=a.n(i),o=a(24),d=a.n(o),j=(a(36),a(6)),u=a.n(j),b=a(14),h=a(9),l=a(5),O=a(25),m=a(2);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.IMAGE=2]="IMAGE",t[t.WITHDRAW=3]="WITHDRAW",t[t.TIME=4]="TIME"}(n||(n={})),function(t){t[t.ME=1]="ME",t[t.OTHER=2]="OTHER",t[t.SYSTEM=3]="SYSTEM"}(c||(c={}));var v=a(11),x=a(10),f=a.n(x),p=a(27);function g(t){var e=t.src,a=t.renderPlaceHolder,n=t.alt,c=void 0===n?"":n,s=t.imgClassName,o=void 0===s?"":s,d=t.imgStyle,j=Object(i.useState)(!1),u=Object(l.a)(j,2),b=u[0],h=u[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:e,alt:c,onLoad:function(){return h(!0)},style:Object(p.a)({display:b?"block":"none"},d),className:o}),!b&&a()]})}var N,T,E,M=function(t){var e=t.data,a=Math.min(e.height,100),n=e.width/e.height*a,c=function(){return Object(r.jsx)(v.a,{speed:2,width:n,height:a,viewBox:"0 0 ".concat(n," ").concat(a),children:Object(r.jsx)("rect",{x:"0",y:"0",width:n,height:a})})};return Object(r.jsx)(f.a,{once:!0,height:a,scrollContainer:".message-list-container",children:Object(r.jsx)(g,{imgStyle:{height:a,width:n},src:e.content,alt:"",renderPlaceHolder:function(){return Object(r.jsx)(c,{})}})})},w=function(t){var e=t.data;return Object(r.jsx)("div",{children:e.content})},R=function(t){var e=t.data;return Object(r.jsx)("div",{children:e.content})},y=(N={},Object(m.a)(N,n.IMAGE,M),Object(m.a)(N,n.TEXT,w),Object(m.a)(N,n.UNKNOWN,R),N),S=function(t){var e=t.data,a=y[e.type];return Object(r.jsx)("div",{children:Object(r.jsx)(a,{data:e})})},I=function(){return Object(r.jsx)(v.a,{speed:2,width:36,height:36,viewBox:"0 0 36 36",children:Object(r.jsx)("circle",{cx:"18",cy:"18",r:"18"})})},k=function(t){var e=t.avatar;return Object(r.jsx)(f.a,{once:!0,height:36,scrollContainer:".message-list-container",children:Object(r.jsx)("div",{className:"avatar-wrap",children:Object(r.jsx)(g,{imgClassName:"avatar",src:e,renderPlaceHolder:function(){return Object(r.jsx)(I,{})}})})})},W=function(t){var e=t.data;return Object(r.jsxs)("div",{className:"my-message-container",children:[Object(r.jsx)(k,{avatar:e.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(S,{data:e})})]})},H=function(t){var e=t.data;return Object(r.jsxs)("div",{className:"other-message-container",children:[Object(r.jsx)(k,{avatar:e.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(S,{data:e})})]})},A=function(t){var e=t.data;return Object(r.jsx)("div",{className:"withraw-content",children:e.content})},C=function(t){var e=t.data;return Object(r.jsx)("div",{className:"time-content",children:e.content})},P=(T={},Object(m.a)(T,n.WITHDRAW,A),Object(m.a)(T,n.TIME,C),T),L=function(t){var e=t.data,a=P[e.type];return Object(r.jsx)("div",{className:"system-message-container",children:Object(r.jsx)(a,{data:e})})},D=(E={},Object(m.a)(E,c.ME,W),Object(m.a)(E,c.OTHER,H),Object(m.a)(E,c.SYSTEM,L),E),G=function(t){var e=t.data,a=D[e.from];return Object(r.jsx)(a,{data:e})},K=function(t){var e=t.messageList,a=t.loadMore,n=t.total,c=e.length<n||0===e.length;return Object(r.jsxs)("div",{className:"message-list-container",children:[e.map((function(t){return Object(r.jsx)("div",{children:Object(r.jsx)(G,{data:t})},t.id)})),Object(r.jsx)(O.a,{onEnter:function(){c&&a()},children:Object(r.jsx)("div",{className:"loader",children:c?"Loading...":"\u6ca1\u6709\u66f4\u591a\u4e86"},0)})]})},U=function(){return Object(r.jsx)("div",{className:"input-box-container"})},X=a(28),Y=a.n(X),B=a(3),F=a.n(B),J=a(29),q=a(30),z=function(){function t(){var e=this;Object(J.a)(this,t),this.id=B.Random.guid(),this.createTime=B.Random.datetime(),this.type=0,this.content="",this.from=void 0,this.userName=void 0,this.avatar=void 0,this.height=void 0,this.width=void 0,this.userMessageProducer=function(){var t;e.type=B.Random.pick([n.TEXT,n.IMAGE,n.UNKNOWN]),(t={},Object(m.a)(t,n.TEXT,(function(){e.content=B.Random.cparagraph(1,3)})),Object(m.a)(t,n.IMAGE,(function(){e.content=B.Random.image(B.Random.pick(["300x250","250x250","240x400"]));var t=e.content.split(/\/+/)[2].split("x"),a=Object(l.a)(t,2),n=a[0],c=a[1];e.width=Number(n),e.height=Number(c)})),Object(m.a)(t,n.UNKNOWN,(function(){e.content="\u3010\u672a\u77e5\u6d88\u606f\u7c7b\u578b\u3011"})),t)[e.type]()},this.from=B.Random.pick([c.ME,c.OTHER,c.SYSTEM]),this.producer[this.from]()}return Object(q.a)(t,[{key:"producer",get:function(){var t,e=this;return t={},Object(m.a)(t,c.ME,(function(){e.userName="\u6211",e.avatar=B.Random.image("40x40",void 0,"\u6211"),e.userMessageProducer()})),Object(m.a)(t,c.OTHER,(function(){e.userName=B.Random.pick(["\u7532","\u4e59","\u4e19"]),e.avatar=B.Random.image("40x40",void 0,e.userName),e.userMessageProducer()})),Object(m.a)(t,c.SYSTEM,(function(){var t;e.type=B.Random.pick([n.TIME,n.WITHDRAW]);var a=(t={},Object(m.a)(t,n.TIME,B.Random.datetime()),Object(m.a)(t,n.WITHDRAW,"".concat(B.Random.pick(["\u7532","\u4e59","\u4e19"]),"\u64a4\u56de\u4e00\u6761\u6d88\u606f")),t);e.content=a[e.type]})),t}}]),t}();F.a.setup({timeout:"1000"}),F.a.mock("/messages",(function(){return{list:new Array(20).fill("").map((function(){return new z})),total:100}}));var Q=function(){var t=Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.a.get("/messages");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();a(63);var V=function(){var t=Object(i.useState)([]),e=Object(l.a)(t,2),a=e[0],n=e[1],c=Object(i.useState)(0),s=Object(l.a)(c,2),o=s[0],d=s[1],j=Object(i.useState)(!1),O=Object(l.a)(j,2),m=O[0],v=O[1],x=Object(i.useCallback)(Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=2;break}return t.abrupt("return");case 2:return v(!0),t.prev=3,t.next=6,Q();case 6:e=t.sent,n([].concat(Object(b.a)(a),Object(b.a)(e.list))),d(e.total),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0);case 14:v(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])}))),[m,a]);return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)("header",{className:"app-header",children:"MessageList"}),Object(r.jsx)(K,{messageList:a,total:o,loadMore:x}),Object(r.jsx)(U,{})]})},Z=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,65)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};d.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root")),Z()}},[[64,1,2]]]);
//# sourceMappingURL=main.4ac3c2ea.chunk.js.map