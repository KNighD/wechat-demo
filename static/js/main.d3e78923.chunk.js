(this["webpackJsonpwechat-demo"]=this["webpackJsonpwechat-demo"]||[]).push([[0],{34:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n,c,r=a(1),i=a(0),s=a.n(i),o=a(23),d=a.n(o),j=(a(34),a(6)),u=a.n(j),h=a(13),b=a(9),l=a(5),O=a(24),m=a.n(O),v=a(2);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.IMAGE=2]="IMAGE",t[t.WITHDRAW=3]="WITHDRAW",t[t.TIME=4]="TIME"}(n||(n={})),function(t){t[t.ME=1]="ME",t[t.OTHER=2]="OTHER",t[t.SYSTEM=3]="SYSTEM"}(c||(c={}));var x=a(11),f=a(10),p=a.n(f),g=a(25);function N(t){var e=t.src,a=t.renderPlaceHolder,n=t.alt,c=void 0===n?"":n,s=t.imgClassName,o=void 0===s?"":s,d=t.imgStyle,j=Object(i.useState)(!1),u=Object(l.a)(j,2),h=u[0],b=u[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:e,alt:c,onLoad:function(){return b(!0)},style:Object(g.a)({display:h?"block":"none"},d),className:o}),!h&&a()]})}var T,E,M,w=function(t){var e=t.data,a=Math.min(e.height,100),n=e.width/e.height*a,c=function(){return Object(r.jsx)(x.a,{speed:2,width:n,height:a,viewBox:"0 0 36 36",children:Object(r.jsx)("rect",{x:"0",y:"0",width:n,height:a})})};return Object(r.jsx)(p.a,{once:!0,height:a,scrollContainer:".message-list-container",children:Object(r.jsx)(N,{imgStyle:{height:a,width:n},src:e.content,alt:"",renderPlaceHolder:function(){return Object(r.jsx)(c,{})}})})},R=function(t){var e=t.data;return Object(r.jsx)("div",{children:e.content})},y=function(t){var e=t.data;return Object(r.jsx)("div",{children:e.content})},S=(T={},Object(v.a)(T,n.IMAGE,w),Object(v.a)(T,n.TEXT,R),Object(v.a)(T,n.UNKNOWN,y),T),I=function(t){var e=t.data,a=S[e.type];return Object(r.jsx)("div",{children:Object(r.jsx)(a,{data:e})})},W=function(){return Object(r.jsx)(x.a,{speed:2,width:36,height:36,viewBox:"0 0 36 36",children:Object(r.jsx)("circle",{cx:"18",cy:"18",r:"18"})})},k=function(t){var e=t.avatar;return Object(r.jsx)(p.a,{once:!0,height:36,scrollContainer:".message-list-container",children:Object(r.jsx)("div",{className:"avatar-wrap",children:Object(r.jsx)(N,{imgClassName:"avatar",src:e,renderPlaceHolder:function(){return Object(r.jsx)(W,{})}})})})},H=function(t){var e=t.data;return Object(r.jsxs)("div",{className:"my-message-container",children:[Object(r.jsx)(k,{avatar:e.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(I,{data:e})})]})},A=function(t){var e=t.data;return Object(r.jsxs)("div",{className:"other-message-container",children:[Object(r.jsx)(k,{avatar:e.avatar}),Object(r.jsx)("div",{className:"content-wrap",children:Object(r.jsx)(I,{data:e})})]})},C=function(t){var e=t.data;return Object(r.jsx)("div",{className:"withraw-content",children:e.content})},P=function(t){var e=t.data;return Object(r.jsx)("div",{className:"time-content",children:e.content})},L=(E={},Object(v.a)(E,n.WITHDRAW,C),Object(v.a)(E,n.TIME,P),E),D=function(t){var e=t.data,a=L[e.type];return Object(r.jsx)("div",{className:"system-message-container",children:Object(r.jsx)(a,{data:e})})},G=(M={},Object(v.a)(M,c.ME,H),Object(v.a)(M,c.OTHER,A),Object(v.a)(M,c.SYSTEM,D),M),K=function(t){var e=t.data,a=G[e.from];return Object(r.jsx)(a,{data:e})},U=function(t){var e=t.messageList,a=t.loadMore,n=t.total;return Object(r.jsx)("div",{className:"message-list-container",children:Object(r.jsx)(m.a,{pageStart:0,hasMore:e.length<n||0===e.length,useWindow:!1,loadMore:a,loader:Object(r.jsx)("div",{className:"loader",children:"Loading..."},0),threshold:20,isReverse:!0,children:e.map((function(t){return Object(r.jsx)(K,{data:t},t.id)}))})})},X=function(){return Object(r.jsx)("div",{className:"input-box-container"})},Y=a(26),B=a.n(Y),F=a(3),J=a.n(F),q=a(27),z=a(28),Q=function(){function t(){var e=this;Object(q.a)(this,t),this.id=F.Random.guid(),this.createTime=F.Random.datetime(),this.type=0,this.content="",this.from=void 0,this.userName=void 0,this.avatar=void 0,this.height=void 0,this.width=void 0,this.userMessageProducer=function(){var t;e.type=F.Random.pick([n.TEXT,n.IMAGE,n.UNKNOWN]),(t={},Object(v.a)(t,n.TEXT,(function(){e.content=F.Random.cparagraph(1,3)})),Object(v.a)(t,n.IMAGE,(function(){e.content=F.Random.image(F.Random.pick(["300x250","250x250","240x400"]));var t=e.content.split(/\/+/)[2].split("x"),a=Object(l.a)(t,2),n=a[0],c=a[1];e.width=Number(n),e.height=Number(c)})),Object(v.a)(t,n.UNKNOWN,(function(){e.content="\u3010\u672a\u77e5\u6d88\u606f\u7c7b\u578b\u3011"})),t)[e.type]()},this.from=F.Random.pick([c.ME,c.OTHER,c.SYSTEM]),this.producer[this.from]()}return Object(z.a)(t,[{key:"producer",get:function(){var t,e=this;return t={},Object(v.a)(t,c.ME,(function(){e.userName="\u6211",e.avatar=F.Random.image("40x40",void 0,"\u6211"),e.userMessageProducer()})),Object(v.a)(t,c.OTHER,(function(){e.userName=F.Random.pick(["\u7532","\u4e59","\u4e19"]),e.avatar=F.Random.image("40x40",void 0,e.userName),e.userMessageProducer()})),Object(v.a)(t,c.SYSTEM,(function(){var t;e.type=F.Random.pick([n.TIME,n.WITHDRAW]);var a=(t={},Object(v.a)(t,n.TIME,F.Random.datetime()),Object(v.a)(t,n.WITHDRAW,"".concat(F.Random.pick(["\u7532","\u4e59","\u4e19"]),"\u64a4\u56de\u4e00\u6761\u6d88\u606f")),t);e.content=a[e.type]})),t}}]),t}();J.a.setup({timeout:"1000"}),J.a.mock("/messages",(function(){return{list:new Array(20).fill("").map((function(){return new Q})),total:100}}));var V=function(){var t=Object(b.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("/messages");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();a(60);var Z=function(){var t=Object(i.useState)([]),e=Object(l.a)(t,2),a=e[0],n=e[1],c=Object(i.useState)(0),s=Object(l.a)(c,2),o=s[0],d=s[1],j=Object(i.useState)(!1),O=Object(l.a)(j,2),m=O[0],v=O[1],x=Object(i.useCallback)(Object(b.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=2;break}return t.abrupt("return");case 2:return v(!0),t.next=5,V();case 5:e=t.sent,n([].concat(Object(h.a)(e.list),Object(h.a)(a))),d(e.total),v(!1);case 9:case"end":return t.stop()}}),t)}))),[m,a]);return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)("header",{className:"app-header",children:"MessageList"}),Object(r.jsx)(U,{messageList:a,total:o,loadMore:x}),Object(r.jsx)(X,{})]})},$=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};d.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(Z,{})}),document.getElementById("root")),$()}},[[61,1,2]]]);
//# sourceMappingURL=main.d3e78923.chunk.js.map